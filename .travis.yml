dist: trusty
sudo: required
git:
  depth: 3
language: ruby
cache: bundler
rvm:
- 2.4.1
addons:
  chrome: stable
env:
  matrix:
  - DB=mysql
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
before_install:
- cd server
- bash scripts/travis-before-install.sh
before_script:
- mysql -e 'CREATE DATABASE IF NOT EXISTS test;'
- mysql -e 'CREATE DATABASE uofmeme_app_test;'
script:
- whereis google-chrome-stable
- google-chrome-stable --version
- whereis chromedriver
- bundle install --path vendor/cache --quiet
- bash scripts/vagrant-tests.sh
install:
- wget -N http://chromedriver.storage.googleapis.com/2.36/chromedriver_linux64.zip
  -P ~/ --quiet
- unzip -q ~/chromedriver_linux64.zip -d ~/
- rm ~/chromedriver_linux64.zip
- sudo mv -f ~/chromedriver /usr/local/share/
- sudo chmod +x /usr/local/share/chromedriver
- sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
after_success:
- bash scripts/deploy.sh
notifications:
  email: false
  slack:
    secure: Ih5r71557455O31RSU+WBhzSvW3J6fYrixtkv/vX3FqvnLjyVm75Kc6YqV60Ec/LlmlrFsXnWvV4TO4UhVgbeto1MKnJXHlPQV1xWThl8EO06WjLhuLfHIvClQoIHpU6/c0pSlVCVzrufaCovOEgqjJueib0M1q+8WuYOpwQ9yB8U1Wv5QyAWENfpLhYmaRwSE76Hm/UKBDKtUsHXLApOzVyxQGOJzdQU/CEXuZ+UIDC++h1Q4Q9l2WWOIN2Sm7Bjtk9azykeiCCJyHQ6DDK+gGeuSCg2IPk9HGJ6rkPkQTmojcMJepSsfzs1le1HixCBq4dno/7UPpq4u44EQ+7QZcPv3i/ldBuXUx9sF287IZLtR08qfxNgurA/i8RepFYomO6Wq2G8CDJ7XysDGVvnYer6hRIS/jCLvjHw0n17C8vE81lQbPVBP6+B8m6hIDm2jB2P3huJ+EzsF1mj6yDs12w59h/qVe7CfYhsEoDMK01z3Z/MZUrZOo4MHqfQdEZJ1B5gSl61BYs6+IZ6MEBuWEdh4qnFoeoNiemb9DPf/n2jUk+z+t+Z1A9O/ptLWMNuJrHYQJz8D+n9BsgYm9PfhcRw17Bj+j7mGeJF26cjoh/3DpZC/qCuoIYm1Lxr4Xmu4f31f4ooHnVsYvSQEsSDlcamILofW6wFjDozb9GfXY=
