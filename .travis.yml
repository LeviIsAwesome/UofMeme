dist: trusty
sudo: required
git:
  depth: 3
language: ruby
cache: bundler
rvm:
- 2.4.1
addons:
  chrome: stable
env:
  matrix:
  - DB=mysql
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
before_install:
- cd server
- bash scripts/travis-before-install.sh
before_script:
- mysql -e 'CREATE DATABASE IF NOT EXISTS test;'
- mysql -e 'CREATE DATABASE uofmeme_app_test;'
script:
- whereis google-chrome-stable
- google-chrome-stable --version
- whereis chromedriver
- bundle install --path vendor/cache --quiet
- bash scripts/vagrant-tests.sh
install:
- wget -N http://chromedriver.storage.googleapis.com/2.36/chromedriver_linux64.zip
  -P ~/ --quiet
- unzip -q ~/chromedriver_linux64.zip -d ~/
- rm ~/chromedriver_linux64.zip
- sudo mv -f ~/chromedriver /usr/local/share/
- sudo chmod +x /usr/local/share/chromedriver
- sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
after_success:
- bash scripts/deploy.sh
notifications:
  email: false
  slack:
    room:
      secure: QkEkiLUCyt8pAaeRo0HUymghR5kZn/x0mPmw3h8kAOHbhI5bVDC8HHjPxF5OApJsVpZkJMyiGWNUPLccK0b7xKGswL37LuOcJiZuKwlm21p2TeTK1swWB2OVUluzYh0ewQI+sk/8VnEXvFXEs9Itfc7QOl37NoeJjvBdq/JqNEXiV8VVxuAfbo+xV0yryOVd8nHfXM8+pmkW2nN/rLioS9gTqZ3WjazRJ9/sDwyzZFhrB78PgaiS0NkLM1GzQC5yI+n/R2h2NyYHX+7EkSf2ok9hLRZg+km/8pYD65B+nKj0J7zNZii6DHv9NV9Nv8FciQCBmMYIepcdgqpXvVrnVzZ0Czf1vVFiENB36QC4eeOJHP3xwIlghyL5+irPgr1d/eTPJ6NDNoDQQNq2TgvHvaNrfEPss+IotFO/cYDsDePNI36hbV6jPT1eI+NzbcfC87Yal0/YeZvyxiy6jBuodmRlzvbGAcK5xw0C+GTj8UpP9o608ZDidYUUKa5q4FknosbxwT8ZEoqP55vHDfzOOpT80IT9s6OF/M4qlxs9+glEd45SwctVhF6oXTFZnVEJQ2V1XheWJPQ1yjo+CojVLS9dzrG7cCzy2RH5D0txHHoW+G15RdW9uFQx/P1PDVBTKcGrxgRQk30MwqK/kfsrc4tYPjODOlEvvkq9LFB2xqU=
      secure: fYyKXY3B3An66Zqo+M9U9I7aA3mwn5tdD0JdOd/mCDfIGkbq/IbRb7fgGbBnHKim41PnqeeKYovbACzTKFBCRWBqYiTeNLl1pXE53PGhQMgLZJczOVRXa4OyvRYl7f7ty15WDb+wxc0VeFAonsn2O6fR3RGgq+jh98PKlm1wuf3pix88DsP7Pv56v7uBEksDBb/l7lDm71g8rUNQUnkKQeM5G67PHdmQ6E4ThEmQ0wM42xkbviQW23ZQIZpvkv8PWUS4LnUjrcdSRXdSqH9/xJuuC3wtvowyYWF+MbvYiEo5SQxal3RtrbbDzt29H+KBnEIyMITWvTZ1cvC95SWNu/5As6W/NaNktwSs8D6EAUoOm9xakF+tx32mA0NcrA0Iw7/3GO+DSyktPO2zRY04BvwkRU4b9M96RqE8lvSYdW7XxcPjQ2YcyKDt0OUC8iYAaCijLjeFDIu9gwr/h5xBQ2YCxYY204KiIy8V035VM7cbGVEk7e8ZD+zo4nBV4unzn/euX847kO9zp3Dip2dHP9NwLFpwV+sL+nNBMNb8odWK64N71WyVMgpIEGa9wk2+sIWCTdpZxK7V07VMWkirO/7s74jKqyhmUUH1EkFHNseG7nB4W+pAkv/zZHeTwrozt+P2wBEx9wRBpfDe1oChyRAvQMHo2KxEzIsRz2T8NhU=
