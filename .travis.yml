dist: trusty
sudo: required
git:
  depth: 3
language: ruby
cache: bundler
rvm:
- 2.4.1
addons:
  chrome: stable
env:
  matrix:
  - DB=mysql
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
before_install:
- cd server
- bash scripts/travis-before-install.sh
before_script:
- mysql -e 'CREATE DATABASE IF NOT EXISTS test;'
- mysql -e 'CREATE DATABASE uofmeme_app_test;'
script:
- whereis google-chrome-stable
- google-chrome-stable --version
- whereis chromedriver
- bundle install --path vendor/cache --quiet
- bash scripts/vagrant-tests.sh
install:
- wget -N http://chromedriver.storage.googleapis.com/2.36/chromedriver_linux64.zip
  -P ~/ --quiet
- unzip -q ~/chromedriver_linux64.zip -d ~/
- rm ~/chromedriver_linux64.zip
- sudo mv -f ~/chromedriver /usr/local/share/
- sudo chmod +x /usr/local/share/chromedriver
- sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
after_success:
- bash scripts/deploy.sh
notifications:
  email: false
  slack:
    rooms:
      secure: "YLF0qZq0/nB/R/bBlJT7A5q9BncaIdKWqpcum+4Dw4v6jvNOGiPya9pcEorzvbOB2lMi9orVVYAsVNlfE9/uGt37gOFP+VPhr4a9QzHjj7G2remfOJjo/8zm8aSvac0KZO2JzFC7Whol7DjHQOswWjJo9+lNDbqkbb2KO8Ysrl2LghTw1LN9206XUxBe1SnJZDKoQHC8Tix3OJpU2IaoKDFtFP8thwfSEu4g4h47JItyXv7okNd3kJPzCndJwfRK3QLC4oCxL5Y6UAPVeMS9QfDOQitOsKq9oG0Yclb42OMf8s8+yJ4LOrhKlBFvC7IJHtreK64aN2MbaXGfhGMDuQ6ZkH0lkovZ6ggj9PrHpro2tmAb58um34OKtIH1cPbdyHdWLCCdpxoDcDSyxCHnI19mOZn1RogyV5ZDzz29SqjUBbYW+y8R8xcxmOPDhXGglxic4uPk8Tk9iUWN/s86pFpf04mgi1/8CgGfrnmbJHhS9xXPlf8jlZnihZm5SQ4R15E0RvrkWNjOh2/kjLvULT4P0Gs1vnxtLIz41E1miZrYmbpkGR2MXibxqj/eeM9sei3d+3Ti5XFybl17dSIqjh2+rRw1pT4bsly1LtGThbqPBIXhFAAmd6xNJpDM9O4TFn1wQRTUF0HNKcAOGwFEkD3i13qEwYyZaY1wbs2v6yg="
      secure: "jDqAFU2jyeAUKJzqBIBFNEmKrhis5naToF++Ct2rZbhvYq5NVb9BdNRVNd56LTj++zRz7iKf9wlkuQGelE3Fqb7TuCO3ds7mwACC4GGyslPhcrED9wn18dHrOuPiC85qthMwi5fyrDJh5slDtzdAX6Sr59O/oH3H/KI0R/eIA6AgLjdXfqixcF+HaNoH+yXzSSikjze53qALiZD5pm+5FlhEDQMeJqu7QwPLWofl6in67Vu7zgp0dlLyLIPz2gazSCEcZmJIEX6K0vNOS2dVtJQRzstG3vs3rtuocuUw6YNnEAmIZBYel7LCbs4swwPeJIxByepP9HYs49hrfi/VL7OAqAFzdJFMdGaOFP5Mk2fzCdBCb4898wT6UmJAB74yd1xYeRTm2PvgLfSlliqtm8Jy+8X/KXUeh5zoAMQb5dsxEgGo4zTzpXLEhAlmDaPQoNLX0GV/+tpW+73Qubo1gmdik5oNERXQ1b62JAqy535m2INNPOMc695Q6szEKGXISF8bxQt82KnruFOl+MN/j2uE1rD1YjlHqaOB/RpfBjv+fSvXj1oCVldnWFsheWGI9Tobz9CrE7/qScIIxb0hIqLKTBd9TvwqjER+R6dst28Tt6n3tD2W8bemd98UFt3fP64lCow/GfGAho7GTMKhM6l0DeEI9Kfnn+DSgyrCPIY="
