dist: trusty
sudo: required
git:
  depth: 3
language: ruby
cache: bundler
rvm:
- 2.4.1
addons:
  chrome: stable
env:
  secure: SfXwo6AwagHs58MSqsDILjcMEbtVpzmpXyCnfkZu1r0PJ2ZFxjF9YfyqYpRuJbCMS8OmHauLDYwbQwP0mh8U/EGhGq2ZLTGyjqUyniBWK5oFS2NqKADFhMtH/1G0rlSFDuL4ghHfTY+Wkfmr/Su7bvTyKXeTUzbP7kBxW2F1de9VlDO5WEpfjDPLu+IAI5dLTDypz1Gcvdo139nrBOLYwj+1djhYAhVdOXoaTchb/+8j/9i0r/EJsR0WvOGupVBQnyqCq73VTWkjJe+VbVdSV3CYWuvXWC8yp6ehQZDegPU+9Qy4LaWOQwEQkP0bUIUM4EPHCgqf3647E/0I2h4wjJbisgLO1VRZztfiXAtgjbchEBc4Dc2GzRCBLZijvFCPGK3TF5jpU8LXI8gVtZ5PoTFB67Gv9zSeWa+/Ww20P+8pZNttDInFkw1ZtkOw1F3HgDVgOOANI+5ebv9AvEgK85eo1W/WFrtuYpbtf3QWCWvG1F4qvjAjD+zepCQYwzId9cNVnH0kWVE9DVhzY5CX3e3n6okT2D2SGPTP05NSw6KJGTN7P6NDWDiSQ48f6odJDvLBMrM0MkB/o7gzfJ6gcz7Bb5iiH+AEubNQu8mzkiNBjmz9WnRsmGM/jS1o1ra+BLfX2W/Lnx4zOXO4pX31vRuwBgC/eTIxptPnN7ma06Y=
before_install:
- cd server
- bash scripts/travis-before-install.sh
before_script:
- mysql -e 'CREATE DATABASE IF NOT EXISTS test;'
- mysql -e 'CREATE DATABASE uofmeme_app_test;'
script:
- whereis google-chrome-stable
- google-chrome-stable --version
- whereis chromedriver
- bundle install --path vendor/cache --quiet
- bash scripts/vagrant-tests.sh
install:
- wget -N http://chromedriver.storage.googleapis.com/2.36/chromedriver_linux64.zip
  -P ~/ --quiet
- unzip -q ~/chromedriver_linux64.zip -d ~/
- rm ~/chromedriver_linux64.zip
- sudo mv -f ~/chromedriver /usr/local/share/
- sudo chmod +x /usr/local/share/chromedriver
- sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
after_success:
- bash scripts/deploy.sh
notifications:
  email: false
  slack:
    room:
      secure: fYyKXY3B3An66Zqo+M9U9I7aA3mwn5tdD0JdOd/mCDfIGkbq/IbRb7fgGbBnHKim41PnqeeKYovbACzTKFBCRWBqYiTeNLl1pXE53PGhQMgLZJczOVRXa4OyvRYl7f7ty15WDb+wxc0VeFAonsn2O6fR3RGgq+jh98PKlm1wuf3pix88DsP7Pv56v7uBEksDBb/l7lDm71g8rUNQUnkKQeM5G67PHdmQ6E4ThEmQ0wM42xkbviQW23ZQIZpvkv8PWUS4LnUjrcdSRXdSqH9/xJuuC3wtvowyYWF+MbvYiEo5SQxal3RtrbbDzt29H+KBnEIyMITWvTZ1cvC95SWNu/5As6W/NaNktwSs8D6EAUoOm9xakF+tx32mA0NcrA0Iw7/3GO+DSyktPO2zRY04BvwkRU4b9M96RqE8lvSYdW7XxcPjQ2YcyKDt0OUC8iYAaCijLjeFDIu9gwr/h5xBQ2YCxYY204KiIy8V035VM7cbGVEk7e8ZD+zo4nBV4unzn/euX847kO9zp3Dip2dHP9NwLFpwV+sL+nNBMNb8odWK64N71WyVMgpIEGa9wk2+sIWCTdpZxK7V07VMWkirO/7s74jKqyhmUUH1EkFHNseG7nB4W+pAkv/zZHeTwrozt+P2wBEx9wRBpfDe1oChyRAvQMHo2KxEzIsRz2T8NhU=
